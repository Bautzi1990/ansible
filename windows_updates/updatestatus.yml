---
# Show Status Windows Updates

- name: Windows Updates Status
  hosts:
    - NAVSQL01
    - NAVPRD01
    - NAVPRD02
    - NAVPRD03
    - NAVDEV01
    - NAVMGMT01
  serial:
    - 1
    - 3
    - 2
  
  tasks:

    - name: Search-only, return list of found updates (if any)
      ansible.windows.win_updates:
        category_names:
          - CriticalUpdates
          - SecurityUpdates
          - UpdateRollups
          - Updates
        state: searched
        reboot: no
      register: win_updates

    - name: print variable
      debug:
        msg: '{{ win_updates.updates }}'
